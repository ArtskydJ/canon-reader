{"version":3,"file":"index-bundle.js","sources":["../../node_modules/mannish/index.js","../../client/globbed-views.js","../../client/globbed-services.js","../../client/index.js"],"sourcesContent":["module.exports = function createMediator() {\n\tconst providers = Object.create(null)\n\tconst syncProviders = Object.create(null)\n\n\tfunction call(name, ...args) {\n\t\tif (providers[name]) {\n\t\t\ttry {\n\t\t\t\tconst response = providers[name](...args)\n\n\t\t\t\treturn Promise.resolve(response)\n\t\t\t} catch (err) {\n\t\t\t\treturn Promise.reject(err)\n\t\t\t}\n\t\t} else {\n\t\t\treturn Promise.reject(new Error(`No async provider found for \"${name}\"`))\n\t\t}\n\t}\n\n\tfunction callSync(name, ...args) {\n\t\tif (syncProviders[name]) {\n\t\t\treturn syncProviders[name](...args)\n\t\t} else {\n\t\t\tthrow new Error(`No synchronous provider found for \"${name}\"`)\n\t\t}\n\t}\n\n\treturn {\n\t\tprovide: createProvide('async', providers),\n\t\tcall,\n\t\tprovideSync: createProvide('synchronous', syncProviders),\n\t\tcallSync\n\t}\n}\n\nconst createProvide = (identifier, map) => function provide(name, fn) {\n\tif (typeof fn !== 'function') {\n\t\tthrow new Error(`${fn} is not a function`)\n\t} else if (typeof name !== 'string') {\n\t\tthrow new Error(`The provider name must be a string`)\n\t} else if (map[name]) {\n\t\tthrow new Error(`There is already a ${identifier} provider for \"${name}\"`)\n\t} else {\n\t\tmap[name] = fn\n\t}\n}\n","\n\nexport default [\n\n]\n","\n\nexport default [\n\n]\n","import mannish from 'mannish'\n\nimport views from './globbed-views'\nimport statefulServices from './globbed-services'\n\nimport stateRouter from 'lib/asr-instance'\n\nconst mediator = mannish()\n\nmediator.provideSync(`stateGo`, stateRouter.go)\nmediator.provideSync(`makePath`, stateRouter.makePath)\nmediator.provideSync(`onStateRouter`, (event, cb) => {\n\tstateRouter.on(event, cb)\n})\n\nconst moduleInitializationPromises = statefulServices.map(module => Promise.resolve(module(mediator)))\n\nviews.map(createView => createView(mediator)).forEach(state => {\n\ttry {\n\t\tstateRouter.addState(state)\n\t} catch (e) {\n\t\tconsole.error(`Error adding`, state)\n\t\tthrow e\n\t}\n})\n\nstateRouter.on(`routeNotFound`, (route, parameters) => {\n\tstateRouter.go(`main.not-found`, Object.assign({ route }, parameters), { replace: true })\n})\n\nstateRouter.on(`stateChangeStart`, (state, params) => console.log(`stateChangeStart`, state.name, params))\nstateRouter.on(`stateChangeError`, error => console.error(error))\nstateRouter.on(`stateError`, error => console.error(error))\nstateRouter.on(`stateChangeEnd`, (state, params) => console.log(`stateChangeEnd`, state.name, params))\n\nPromise.all(moduleInitializationPromises).then(() => {\n\tstateRouter.evaluateCurrentRoute(`main`)\n})\n"],"names":[],"mappings":"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"}